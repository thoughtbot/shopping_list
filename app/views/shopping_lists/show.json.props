json.header do
  json.title "Family Shopping List"
end

json.items do
  json.array! @items do |item|
    json.id item.id
    json.name item.name  
    json.completed item.completed
    json.detailPath item_path(item)
    json.toggleForm do
      form_props(model: item) do |f|
        f.submit "Toggle"
      end
    end
  end
end

json.totalCost(defer: [:auto, placeholder: { amount: "Calculating...", message: "Getting current prices" }]) do
  # Simulate expensive API call to get current prices
  sleep 3
  json.amount "$23.45"
  json.message "Estimated total based on current prices"
end

json.newItemForm do
  form_props(model: Item.new, url: items_path) do |f|
    f.text_field :name, placeholder: "Add item..."
    f.submit "Add"
  end
end